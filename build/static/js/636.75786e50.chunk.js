"use strict";(self.webpackChunkahlin=self.webpackChunkahlin||[]).push([[636],{9636:(e,l,i)=>{i.r(l),i.d(l,{default:()=>N});var s=i(5043),a=i(6068),d=i(8365),o=i(579);const n=()=>{const[e,l]=(0,s.useState)({columns:[{label:"S.No.",field:"sno",width:50,selected:!1},{label:"Booking Id",field:"id",width:50,selected:!1},{label:"Customer Name",field:"name",width:50,selected:!1},{label:"Mobile No.",field:"mobile",width:100,selected:!1},{label:"Booking Amount",field:"amount",width:50,selected:!1},{label:"Booking Date",field:"date",width:50,selected:!1},{label:"Action",field:"action",width:100,selected:!1}],rows:[]});return(0,o.jsx)("div",{className:"col-xl-12 pt-4",children:(0,o.jsx)("div",{className:"card dz-card",id:"bootstrap-table1",children:(0,o.jsxs)("div",{className:"col-12 card-body position-relative card-body-2",children:[(0,o.jsx)("div",{className:"card_title_container",children:(0,o.jsx)("h4",{className:"card-title",children:"Trip Booking History"})}),(0,o.jsx)("div",{className:"search_icon",children:(0,o.jsx)("i",{class:"fa-solid fa-magnifying-glass"})}),(0,o.jsx)("div",{className:"table-responsive mdb_table",children:(0,o.jsx)(d.g6D,{bordered:!0,displayEntries:!1,entries:10,className:"text-nowrap",hover:!0,data:e,noBottomColumns:!0,sortable:!1,paginationLabel:"\xab\xbb"})})]})})})};var t=i(4858),r=i(3216),c=i(4299),m=i(64),u=i.n(m),v=i(6178),b=i.n(v);const N=()=>{const[e,l]=(0,s.useState)(),[i,d]=(0,s.useState)(),[m,v]=(0,s.useState)(0),[N,h]=(0,s.useState)([]),{id:p}=(0,r.g)(),{state:g}=(0,r.zy)(),x=(0,r.Zp)(),{register:f,handleSubmit:j,setValue:y,formState:{errors:w}}=(0,t.mN)({mode:"onChange"});(0,s.useEffect)((()=>{"Guide"===(null===g||void 0===g?void 0:g.type)&&A(),"User"===(null===g||void 0===g?void 0:g.type)&&C()}),[]);const A=async()=>{try{let{data:s}=await(0,c.Pu)(p);if(s&&(null===s||void 0===s||!s.error)){var e,i;console.log(s),l(null===s||void 0===s||null===(e=s.results)||void 0===e?void 0:e.guide);let a=null===s||void 0===s||null===(i=s.results)||void 0===i?void 0:i.guide;y("name",(null===a||void 0===a?void 0:a.fullName)||"NA"),y("number",(null===a||void 0===a?void 0:a.mobileNumber)||"NA"),y("email",(null===a||void 0===a?void 0:a.email)||"NA"),y("dob",b()(null===a||void 0===a?void 0:a.dob).format("YYYY-MM-DD")||"NA"),y("image",(null===a||void 0===a?void 0:a.profile_image)||"NA"),y("country",(null===a||void 0===a?void 0:a.countryName)||"NA"),v(null===a||void 0===a?void 0:a.commission),d(null===a||void 0===a?void 0:a.profile_image)}}catch(s){console.log(s)}},C=async()=>{try{let{data:s}=await(0,c.ID)(p);if(s&&(null===s||void 0===s||!s.error)){var e,i;console.log(s),l(null===s||void 0===s||null===(e=s.results)||void 0===e?void 0:e.user);let a=null===s||void 0===s||null===(i=s.results)||void 0===i?void 0:i.user;y("name","".concat(null===a||void 0===a?void 0:a.firstName)||"NA"),null!==a&&void 0!==a&&a.lastName&&y("name","".concat((null===a||void 0===a?void 0:a.firstName)+" "+(null===a||void 0===a?void 0:a.lastName))||"NA"),y("email",(null===a||void 0===a?void 0:a.email)||"NA"),y("number",(null===a||void 0===a?void 0:a.mobileNumber)||"NA"),y("dob",b()(null===a||void 0===a?void 0:a.dob).format("YYYY-MM-DD")||"NA"),y("image",(null===a||void 0===a?void 0:a.profile_image)||"NA"),d(null===a||void 0===a?void 0:a.profile_image),y("country",(null===a||void 0===a?void 0:a.countryName)||"NA")}}catch(s){console.log(s)}};return(0,o.jsx)(a.A,{activeSlide:"Guest",children:(0,o.jsx)("div",{className:"content-body",children:(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-xl-12",children:(0,o.jsxs)("div",{className:"card profile-card card-bx m-b30",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsx)("h6",{className:"title",children:null===g||void 0===g?void 0:g.title})}),(0,o.jsxs)("form",{className:"profile-form",onSubmit:j((async e=>{console.log(e);try{let l=new FormData;l.append("fullName",(null===e||void 0===e?void 0:e.name)||"NA"),l.append("mobileNumber",(null===e||void 0===e?void 0:e.number)||"NA"),l.append("email",(null===e||void 0===e?void 0:e.email)||"NA"),l.append("Dob",(null===e||void 0===e?void 0:e.dob)||"2024-12-04"),"User"===(null===g||void 0===g?void 0:g.type)&&l.append("userImage",N),"Guide"===(null===g||void 0===g?void 0:g.type)&&l.append("guideImage",N);let{data:i}=await(0,c.c_)(null===g||void 0===g?void 0:g.api,p,l);!i||null!==i&&void 0!==i&&i.error||x(-1)}catch(l){console.log(l)}})),children:[(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["Name",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"text",name:"name",className:"form-control ".concat(w.name?"is-invalid":""),...f("name",{required:"* Name is required",minLength:{value:2,message:"Minimum 2 characters"},pattern:{value:/^(?!\s)[^\d]*(?:\s[^\d]+)*$/,message:"Spaces at the start & numbers are not allowed"}})}),w.name&&(0,o.jsx)("div",{className:"invalid-feedback",children:w.name.message})]}),(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["Contact Number",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"number",className:"form-control ".concat(w.number?"is-invalid":""),...f("number",{required:"* Number is required",minLength:{value:9,message:"Minimum 9 digits"}})}),w.number&&(0,o.jsx)("div",{className:"invalid-feedback",children:w.number.message})]}),(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["EMAIL ID",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"email",className:"form-control ".concat(w.email?"is-invalid":""),...f("email",{required:"* Email is required",pattern:{value:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Invalid email address"}})}),w.email&&(0,o.jsx)("div",{className:"invalid-feedback",children:w.email.message})]}),(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["Date of birth",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"date",className:"form-control ".concat(w.dob?"is-invalid":""),...f("dob",{required:"* Dob is required"})}),w.dob&&(0,o.jsx)("div",{className:"invalid-feedback",children:w.dob.message})]}),(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["Country",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"text",className:"form-control ".concat(w.country?"is-invalid":""),...f("country",{required:"* Country is required"})}),w.country&&(0,o.jsx)("div",{className:"invalid-feedback",children:w.country.message})]}),"Guide"===(null===g||void 0===g?void 0:g.type)&&(0,o.jsxs)("div",{className:"col-md-3 m-b30",children:[(0,o.jsxs)("label",{className:"form-label",children:["Commission",(0,o.jsx)("sup",{className:"mandatesign",children:"*"})]}),(0,o.jsx)("input",{disabled:!(null!==g&&void 0!==g&&g.isEdit),type:"number",value:m,className:"form-control",onChange:e=>v(e.target.value)})]}),(0,o.jsx)("div",{className:"col-md-5 m-b30",children:(0,o.jsxs)("label",{className:"form-label",htmlFor:"img",children:["Passport Image",(0,o.jsx)("sup",{className:"mandatesign",children:"*"}),(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("img",{src:i||"/images/0_91v0rV9LQBJdPX7s.jpg",className:"passport_photo_manage",alt:"i"}),(0,o.jsx)("input",{type:"file",onChange:e=>{h(e.target.files[0])},className:"d-none",name:"img",id:"img"})]})]})})]})}),(null===g||void 0===g?void 0:g.isEdit)&&(0,o.jsxs)("div",{className:"card-footer justify-content-start ",children:[(0,o.jsx)("button",{className:"btn btn-primary",children:"Save"}),"Guide"===(null===g||void 0===g?void 0:g.type)&&(0,o.jsx)("button",{className:"btn btn-primary ms-4",onClick:async e=>{e.preventDefault();try{if(m>100||!m||m<1)return u().fire({toast:!0,icon:"warning",position:"top-end",title:"Please enter a valid commission percentage",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),!1;let e={guideId:p,commission:m},{data:l}=await(0,c._s)(e);!l||null!==l&&void 0!==l&&l.error||u().fire({toast:!0,icon:"success",position:"top-end",title:"Commission updated successfully",showConfirmButton:!1,timerProgressBar:!0,timer:3e3}),x(-1)}catch(l){console.log(l)}},type:"button",children:"Update Commission"})]})]})]})}),(0,o.jsx)("div",{children:(0,o.jsx)(n,{})})]})})})})}}}]);
//# sourceMappingURL=636.75786e50.chunk.js.map